<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="styles.css" />
        <title>Hypnotic Squares | Acorn</title>
    </head>
    <body>
        <script src="../dist/acorn.js"></script>
        <script id="sketch">
            env('sketch-2d', { width: 900, height: 900, range: [-1, 1] })
            displayEnv()

            // create a grid
            const grid = new Grid([-1, -1], [2, 2], 8, 8)

            // generate a list off offsets for each smallest square
            const cellSize = grid.cellSize
            const randomizedOffsets = full(grid.cellCount, () => randomOffset(cellSize[0] / 4.0, cellSize[1] / 4.0))

            // lerp squares from grid rect towards center point
            const squareCount = 5
            const smallSquarePct = 0.45
            const squares = zip(grid.rects(), randomizedOffsets).map(([rect, randOffset]) =>
                // stack of squares in each grid cell
                linspace(0, 1, squareCount).map((pct) => {
                    const size = mapRange(pct, 0, 1, 0, cellSize[0] * smallSquarePct)
                    const trx = lerpPt([0, 0], randOffset, pct)
                    // rect inset by size and translated by lerped offset
                    // const newRect = translate(offset(rect, -size), trx)
                    // if (pct > 0.8) {
                    //     return withAttribs(newRect, { stroke: secondary, weight: 0.01 })
                    // } else {
                    //     return withAttribs(newRect, { stroke: primary, weight: 0.01 })
                    // }
                })
            )

            clear(palette.background)
            // draw(squares, { stroke: palette.primary, weight: 0.01 })
        </script>
        <a href="https://generativeartistry.com/tutorials/hypnotic-squares/">generativeartistry.com</a>
    </body>
</html>
